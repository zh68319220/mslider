"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,s,i){return s&&t(e.prototype,s),i&&t(e,i),e}}(),width=640,Tool={px2em:function(t){return 10*t/width},setTransform:function(t,e){t.style.transform=e,t.style.webkitTransform=e},setTransition:function(t,e){t.style.transition=e,t.style.webkitTransition=e},clearTransition:function(t){t.style.transition="",t.style.webkitTransition=""},getPxFromStyle:function(t){return isNaN(parseInt(t.style.transform.split("(")[1]))?parseInt(t.style.transform.split("(")[1]):parseInt(t.style.webkitTransform.split("(")[1])}},Mslider=function(){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0px",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0px";_classCallCheck(this,t),this.ele=document.querySelector(e),this._sl=this.ele.getElementsByTagName("ul")[0],this._slLi=this._sl.getElementsByTagName("li"),this._slBar=this.ele.getElementsByTagName("ul")[1],this._slBarLi=this._slBar.getElementsByTagName("li"),this._liWidth=this._slLi[0].offsetWidth,this._liTotal=this._slLi.length,s=Tool.px2em(parseInt(s))+"rem",i=Tool.px2em(parseInt(i))+"rem",this.ele.style.width=s,this.ele.style.height=i,Tool.setTransform(this._sl,"translateX(0)"),this._sl.style.width=this._liTotal+"00%",this.disable=!0,this.attachEvents()}return _createClass(t,[{key:"attachEvents",value:function(){var t=this;this._sl.addEventListener("touchstart",function(e){t.once=!0,t.dire=1,this.addEventListener("touchmove",t.slTouchmove,!1),this.addEventListener("touchend",t.slTouchend,!1),Tool.clearTransition(this),this.startX=e.touches[0].pageX,this.sstartX=e.touches[0].pageX,this.mmoveX=e.touches[0].pageX,this.startY=e.touches[0].pageY},!1),this.bdTouchmove=function(t){t.preventDefault()},this.slTouchmove=function(e){if(t.once){var s=e.touches[0].pageY-this.startY>=0?e.touches[0].pageY-this.startY:this.startY-e.touches[0].pageY,i=e.touches[0].pageX-this.sstartX>=0?e.touches[0].pageX-this.sstartX:this.sstartX-e.touches[0].pageX;this.startY=e.touches[0].pageY,s>i?(t.dire=1,this.removeEventListener("touchmove",t.slTouchmove,!1),this.removeEventListener("touchend",t.slTouchend,!1),document.body.removeEventListener("touchmove",t.bdTouchmove,!1)):(t.dire=2,document.body.addEventListener("touchmove",t.bdTouchmove,!1)),t.once=!1}if(2==t.dire){var o=Tool.getPxFromStyle(this);Tool.setTransform(this,"translateX("+(e.touches[0].pageX-this.sstartX+o)+"px)"),this.sstartX=e.touches[0].pageX,this.mmoveX=e.touches[0].pageX}},this.slTouchend=function(e){var s=Tool.getPxFromStyle(this);if(Tool.setTransition(this,"all ease-out .3s"),s>=0)Tool.setTransform(this,"translateX(0px)");else{var i=parseInt(-s/t._liWidth),o=-s%t._liWidth;o>=t._liWidth/4&&i<t._liTotal-1&&(this.startX<=this.mmoveX||(i+=1));for(var n=0;n<=t._slBarLi.length-1;n++)t._slBarLi[n].className="";t._slBarLi[i].className="mslide_ac",Tool.setTransform(this,"translateX(-"+i*t._liWidth+"px)")}},this._sl.addEventListener("touchmove",this.slTouchmove,!1),this._sl.addEventListener("touchend",this.slTouchend,!1),this._sl.addEventListener("webkitTransitionEnd",function(t){Tool.clearTransition(this)}),this._sl.addEventListener("transitionend",function(t){Tool.clearTransition(this)})}}]),t}();window.Mslider=Mslider;